function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},i={},n=e.parcelRequire4383;null==n&&((n=function(t){if(t in a)return a[t].exports;if(t in i){var e=i[t];delete i[t];var n={id:t,exports:{}};return a[t]=n,e.call(n.exports,n,n.exports),n.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},e.parcelRequire4383=n);var o=n("2shzp"),l=n("7Y9D8");const r=t=>{let e=document.querySelector(t);if(e)return e;throw Error(`the ${t} dose not exist`)};function s(t){let e=[];return t.forEach(t=>{e.push(t.id)}),e}const d=t=>localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):[],c=r(".library-gallery"),u=t=>{let e=t.map(t=>{let{genres:e,original_title:a,poster_path:i,id:n,release_date:o}=t;return`<div class="photo-card" data-id="${n}" >
      <div
        class="modal-info"
        data-vote-avg="${t.vote_average}"
        data-vote-count="${t.vote_count}"
        data-popularity="${t.popularity}"
        data-about="${t.overview}"
        data_original_title="${t.original_title}"
        >
      </div>
    <img src="${i=i?`https://image.tmdb.org/t/p/w500${i}`:"../../images/no-signal-img.jpg"}" class="image" alt="${a}" />
     <div class="overlay-text">
        <h1>${Math.round(10*t.vote_average)/10}</h1>
    </div>
  <div class="container-info">
    <b class="title">${a}</b>
    <div class="cont-descr">
      <p class="descr-item">${e=function(t){let e="";return t.forEach(t=>{e=e+t.name+", "}),e=e?e.slice(0,-2):"N/A"}(e)}</p>
      <p class="descr-item">|</p>
      <p class="descr-item">${o=function(t){let e=t?t.split("-")[0]:"N/A";return e}(o)}</p>
    </div>
  </div>
</div>`}).join("");c.innerHTML=e},m="toWatch",y=r(".no-movie");async function v(e){t(l).Loading.standard("Loading..."),y.classList.remove("is-hidden");try{let t=d(e);t=s(t);let a=await g(t);0!==a.length&&y.classList.add("is-hidden"),u(a)}catch(t){console.log(t)}finally{t(l).Loading.remove()}}const g=async t=>{let e=[];return await Promise.all(t.map(async t=>{try{let a=`https://api.themoviedb.org/3/movie/${t}?api_key=53b2ac0d64cbeedea763734f4fe8a4ce`,i=await (0,o.default).get(a),n=i.data;e.push(n)}catch(t){console.log(t)}})),e},f=async()=>{await v(m);let t=r('[data-whichLibrary="watched"]'),e=r('[data-whichLibrary="queue"]');t.addEventListener("click",async()=>{e.classList.contains("active-library")&&e.classList.remove("active-library"),t.classList.add("active-library"),await v(m)}),e.addEventListener("click",async()=>{t.classList.contains("active-library")&&t.classList.remove("active-library"),e.classList.add("active-library"),await v("toQueue")})},p=r(".library-film_info_modal"),h=r(".img_content"),L=r(".film-detail_votes"),b=r(".film-detail_votes2"),E=r(".film_title"),_=r(".film-detail_popularity"),M=r(".film-detail_original-title"),w=r(".film-detail_genre"),T=r(".film-detail_description"),$=r("#close-button"),S=r(".library-gallery"),O=()=>{S.addEventListener("click",t=>{let e=t.target.parentNode,a=e.querySelector(".modal-info"),i=a.getAttribute("data-vote-count"),n=a.getAttribute("data-vote-avg"),o=Number(n);L.innerHTML=` ${Math.round(10*o)/10} `,b.innerHTML=` / ${i}`;let l=r(".modal"),s=e.dataset.id;l.dataset.movieId=s;let d=e.querySelector("img"),c=d.getAttribute("src");h.innerHTML=`<img src="${c}">`;let u=e.querySelector(".container-info b"),m=u.textContent;E.innerHTML=` ${m} `;let y=a.getAttribute("data-popularity");_.innerHTML=`Popularity: ${Math.round(y)} `;let v=a.getAttribute("data_original_title");M.innerHTML=`Original-title: ${"undefined"===v?m:v} `;let g=e.querySelector(".container-info"),f=g.querySelector(".cont-descr"),$=f.querySelector("p").textContent;w.innerHTML=`Genre: ${$}`;let S=a.getAttribute("data-about");T.innerHTML+=` ${S} `,p.showModal()})};function q(){let t=p.querySelectorAll('[class*="film-detail"]');t.forEach(t=>{t.innerHTML=""})}$.addEventListener("click",()=>{q(),p.close()}),window.addEventListener("click",t=>{t.target==p&&(q(),p.close())});const R="toWatch",x="toQueue",A=r(".library-film_info_modal .modal"),C=(t,e)=>{localStorage.setItem(t,JSON.stringify(e))},D=()=>{A.addEventListener("click",t=>{let e=t.target,a=t.currentTarget.dataset.movieId,i=d(R),n=d(x),o=s(i),l=s(n),r={id:a};"toWatch"===e.dataset.action?(o.includes(a)||(i.push(r),C(R,i),e.textContent="REMOVE FROM WATCHED",e.dataset.action="toWatchRmv"),v(R)):"toQueue"===e.dataset.action?(l.includes(a)||(n.push(r),C(x,n),e.textContent="REMOVE FROM QUEUE",e.dataset.action="toQueueRmv"),v(x)):"toWatchRmv"===e.dataset.action?(i=i.filter(t=>t.id!==a),C(R,i),e.textContent="ADD TO WATCHED",e.dataset.action="toWatch",v(R)):"toQueueRmv"===e.dataset.action&&(n=n.filter(t=>t.id!==a),C(x,n),e.textContent="ADD TO QUEUE",e.dataset.action="toQueue",v(x))})},k=r(".library-film_info_modal .modal"),Q=r(".library-gallery"),W=(t,e,a)=>{let i=s(t);"toWatch"===e.dataset.action&&i.includes(a)&&(e.textContent="REMOVE FROM WATCHED",e.dataset.action="toWatchRmv"),"toWatchRmv"!==e.dataset.action||i.includes(a)||(e.textContent="ADD TO WATCHED",e.dataset.action="toWatch")},H=(t,e,a)=>{let i=s(t);"toQueue"===e.dataset.action&&i.includes(a)&&(e.textContent="REMOVE FROM QUEUE",e.dataset.action="toQueueRmv"),"toQueueRmv"!==e.dataset.action||i.includes(a)||(e.textContent="ADD TO QUEUE",e.dataset.action="toQueue")},U=t=>{let e=t.target.parentNode,a=k.querySelector(".watch"),i=k.querySelector(".queue"),n=e.dataset.id,o=d("toWatch"),l=d("toQueue");W(o,a,n),H(l,i,n)},N=()=>{Q.addEventListener("click",U)};window.addEventListener("DOMContentLoaded",()=>{f(),O(),D(),N()});const I=document.querySelector("body"),F=document.querySelector(".dl-btn"),V=document.querySelector(".fa-sun"),j=document.querySelector(".fa-moon");function J(t){localStorage.setItem("darkmode",t)}!function(){let t=localStorage.getItem("darkmode");null===t?(J(!1),V.style.display="inline",j.style.display="none"):"true"===t?(I.classList.add("darkmode"),V.style.display="none",j.style.display="inline"):"false"===t&&(V.style.display="inline",j.style.display="none")}(),F.addEventListener("click",()=>{I.classList.toggle("darkmode"),V.classList.add("animated"),j.classList.add("animated"),J(I.classList.contains("darkmode")),I.classList.contains("darkmode")?(V.style.display="none",j.style.display="inline"):(V.style.display="inline",j.style.display="none"),setTimeout(()=>{V.classList.remove("animated"),j.classList.remove("anmated")},500)});
//# sourceMappingURL=library.1c997b9e.js.map
