function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},i={},o=e.parcelRequire4383;null==o&&((o=function(t){if(t in a)return a[t].exports;if(t in i){var e=i[t];delete i[t];var o={id:t,exports:{}};return a[t]=o,e.call(o.exports,o,o.exports),o.exports}var l=Error("Cannot find module '"+t+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(t,e){i[t]=e},e.parcelRequire4383=o);var l=o("2shzp"),r=o("7Y9D8");const n=t=>{let e=document.querySelector(t);if(e)return e;throw Error(`the ${t} does not exist`)};function s(t){let e=[];return t.forEach(t=>{e.push(t.id)}),e}const d=t=>localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):[],c=n(".library-gallery"),u=t=>{let e=t.map(t=>{let{genres:e,original_title:a,poster_path:i,id:o,release_date:l}=t;return`<div class="photo-card" data-id="${o}" >
      <div
        class="modal-info"
        data-vote-avg="${t.vote_average}"
        data-vote-count="${t.vote_count}"
        data-popularity="${t.popularity}"
        data-about="${t.overview}"
        data_original_title="${t.original_title}"
        >
      </div>
    <img src="${i=i?`https://image.tmdb.org/t/p/w500${i}`:"../../images/no-signal-img.jpg"}" class="image" alt="${a}" />
     <div class="overlay-text">
        <h1>${Math.round(10*t.vote_average)/10}</h1>
    </div>
  <div class="container-info">
    <b class="title">${a}</b>
    <div class="cont-descr">
      <p class="descr-item">${e=function(t){let e="";return t.forEach(t=>{e=e+t.name+", "}),e=e?e.slice(0,-2):"N/A"}(e)}</p>
      <p class="descr-item">|</p>
      <p class="descr-item">${l=function(t){let e=t?t.split("-")[0]:"N/A";return e}(l)}</p>
    </div>
  </div>
</div>`}).join("");c.innerHTML=e};var y=o("hUSXI");const m="toWatch",v=n(".no-movie");async function p(e){t(r).Loading.standard("Loading..."),v.classList.remove("is-hidden");try{let t=d(e);t=s(t);let a=await f(t);0!==a.length&&v.classList.add("is-hidden"),u(a),(0,y.changeNoteColor)()}catch(t){console.log(t)}finally{t(r).Loading.remove()}}const f=async t=>{let e=[];return await Promise.all(t.map(async t=>{try{let a=`https://api.themoviedb.org/3/movie/${t}?api_key=53b2ac0d64cbeedea763734f4fe8a4ce`,i=await (0,l.default).get(a),o=i.data;e.push(o)}catch(t){console.log(t)}})),e},g=async()=>{await p(m);let t=n('[data-whichLibrary="watched"]'),e=n('[data-whichLibrary="queue"]');t.addEventListener("click",async()=>{e.classList.contains("active-library")&&e.classList.remove("active-library"),t.classList.add("active-library"),await p(m)}),e.addEventListener("click",async()=>{t.classList.contains("active-library")&&t.classList.remove("active-library"),e.classList.add("active-library"),await p("toQueue")})};var b=o("jT5kn");const L=n(".library-film_info_modal"),h=n(".img_content"),E=n(".film-detail_votes"),w=n(".film-detail_votes2"),_=n(".film_title"),M=n(".film-detail_popularity"),T=n(".film-detail_original-title"),$=n(".film-detail_genre"),S=n(".film-detail_description"),k=n("#close-button"),q=n(".library-gallery"),O=n(".modal"),A=n(".youtubeButtonLibrary"),C=n(".trailerLibrary"),R=()=>{q.addEventListener("click",t=>{let e=t.target.parentNode,a=e.querySelector(".modal-info"),i=a.getAttribute("data-vote-count"),o=a.getAttribute("data-vote-avg"),l=Number(o);E.innerHTML=` ${Math.round(10*l)/10} `,w.innerHTML=` / ${i}`;let r=e.dataset.id;O.dataset.movieId=r;let n=e.querySelector("img"),s=n.getAttribute("src");h.innerHTML=`<img src="${s}">`;let d=e.querySelector(".container-info b"),c=d.textContent;_.innerHTML=` ${c} `;let u=a.getAttribute("data-popularity");M.innerHTML=`Popularity: ${Math.round(u)} `;let y=a.getAttribute("data_original_title");T.innerHTML=`Original-title: ${"undefined"===y?c:y} `;let m=e.querySelector(".container-info"),v=m.querySelector(".cont-descr"),p=v.querySelector("p").textContent;$.innerHTML=`Genre: ${p}`;let f=a.getAttribute("data-about");S.innerHTML+=` ${f} `,L.showModal()})};function x(){let t=L.querySelectorAll('[class*="film-detail"]');t.forEach(t=>{t.innerHTML=""}),C.innerHTML=""}A.addEventListener("click",async()=>{let t=O.getAttribute("data-movie-id"),e=await (0,b.fetchMovieTrailer)(t);C.innerHTML=`<iframe
                                  src="https://www.youtube.com/embed/${e}"
                                  title="YouTube video player"
                                  frameborder="0"
                                  allow="accelerometer;
                                  autoplay;
                                  clipboard-write;
                                  encrypted-media;
                                  gyroscope;
                                  picture-in-picture;
                                  web-share"
                                  allowfullscreen
                                >
                                </iframe>`}),k.addEventListener("click",()=>{x(),L.close()}),window.addEventListener("click",t=>{t.target==L&&(x(),L.close())}),document.addEventListener("keydown",t=>{t.preventDefault(),27==t.keyCode&&(x(),L.close())});const D="toWatch",H="toQueue",Q=n(".library-film_info_modal .modal"),W=(t,e)=>{localStorage.setItem(t,JSON.stringify(e))},U=n('button[data-whichLibrary="watched"]'),N=n('button[data-whichLibrary="queue"]'),I=()=>{Q.addEventListener("click",t=>{let e=t.target,a=t.currentTarget.dataset.movieId,i=d(D),o=d(H),l=s(i),r=s(o),n={id:a};"toWatch"===e.dataset.action?(l.includes(a)||(i.push(n),W(D,i),e.textContent="REMOVE FROM WATCHED",e.dataset.action="toWatchRmv"),U.classList.add("active-library"),N.classList.remove("active-library"),p(D)):"toQueue"===e.dataset.action?(r.includes(a)||(o.push(n),W(H,o),e.textContent="REMOVE FROM QUEUE",e.dataset.action="toQueueRmv"),N.classList.add("active-library"),U.classList.remove("active-library"),p(H)):"toWatchRmv"===e.dataset.action?(i=i.filter(t=>t.id!==a),W(D,i),e.textContent="ADD TO WATCHED",e.dataset.action="toWatch",U.classList.add("active-library"),N.classList.remove("active-library"),p(D)):"toQueueRmv"===e.dataset.action&&(o=o.filter(t=>t.id!==a),W(H,o),e.textContent="ADD TO QUEUE",e.dataset.action="toQueue",N.classList.add("active-library"),U.classList.remove("active-library"),p(H))})},F=n(".library-film_info_modal .modal"),V=n(".library-gallery"),j=(t,e,a)=>{let i=s(t);"toWatch"===e.dataset.action&&i.includes(a)&&(e.textContent="REMOVE FROM WATCHED",e.dataset.action="toWatchRmv"),"toWatchRmv"!==e.dataset.action||i.includes(a)||(e.textContent="ADD TO WATCHED",e.dataset.action="toWatch")},J=(t,e,a)=>{let i=s(t);"toQueue"===e.dataset.action&&i.includes(a)&&(e.textContent="REMOVE FROM QUEUE",e.dataset.action="toQueueRmv"),"toQueueRmv"!==e.dataset.action||i.includes(a)||(e.textContent="ADD TO QUEUE",e.dataset.action="toQueue")},P=t=>{let e=t.target.parentNode,a=F.querySelector(".watch"),i=F.querySelector(".queue"),o=e.dataset.id,l=d("toWatch"),r=d("toQueue");j(l,a,o),J(r,i,o)},Y=()=>{V.addEventListener("click",P)};window.addEventListener("DOMContentLoaded",()=>{g(),R(),I(),Y()});const z=document.querySelector("body"),B=document.querySelector(".dl-btn"),G=document.querySelector(".fa-sun"),X=document.querySelector(".fa-moon");function K(t){localStorage.setItem("darkmode",t)}!function(){let t=localStorage.getItem("darkmode");null===t?(K(!1),G.style.display="inline",X.style.display="none"):"true"===t?(z.classList.add("darkmode"),G.style.display="none",X.style.display="inline"):"false"===t&&(G.style.display="inline",X.style.display="none")}(),B.addEventListener("click",()=>{z.classList.toggle("darkmode"),G.classList.add("animated"),X.classList.add("animated"),K(z.classList.contains("darkmode")),z.classList.contains("darkmode")?(G.style.display="none",X.style.display="inline"):(G.style.display="inline",X.style.display="none"),setTimeout(()=>{G.classList.remove("animated"),X.classList.remove("anmated")},500)});
//# sourceMappingURL=library.8e5a62fd.js.map
