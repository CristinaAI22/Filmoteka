function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},o={},n=t.parcelRequire4383;null==n&&((n=function(e){if(e in a)return a[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequire4383=n),n.register("1zbvg",function(e,t){Object.defineProperty(e.exports,"default",{get:function(){return a},set:void 0,enumerable:!0,configurable:!0});var a=e=>{let t=document.querySelector(e);if(t)return t;throw Error(`the ${e} dose not exist`)}});var i=n("2shzp");const l="53b2ac0d64cbeedea763734f4fe8a4ce",s="https://api.themoviedb.org/3";n("1zbvg");const r=(e,t,a)=>{a.innerHTML="";let o=e.map(e=>{let{genre_ids:a,title:o,name:n,poster_path:i,release_date:l,id:s}=e;return a=function(e,t){let a="";return t.forEach(t=>{e.includes(t.id)&&(a=a+t.name+", ")}),a=a?a.slice(0,-2):"Unknown"}(a,t),l=function(e){let t=e?e.split("-")[0]:"Unknown";return t}(l),o=o||n,`<div class="photo-card" data-id="${s}" >
      <div
        class="modal-info"
        data-vote-avg="${e.vote_average}"
        data-vote-count="${e.vote_count}"
        data-popularity="${e.popularity}"
        data-about="${e.overview}"
        data_original_title="${e.original_title}"
        >
      </div>
    <img src="${i=i?`https://image.tmdb.org/t/p/w500${i}`:"../images/no-signal-img.jpg"}" class="image" alt="${o}" />
    <div class="overlay-text">
        <h1>${Math.round(10*e.vote_average)/10}</h1>
    </div>
  <div class="container-info">
    <b class="title">${o}</b>
    <div class="cont-descr">
      <p class="descr-item">${a}</p>
      <p class="descr-item">|</p>
      <p class="descr-item">${l}</p>
    </div>
  </div>
</div>`}).join("");a.innerHTML=o};var d=n("1zbvg");const c=(0,d.default)("#prev-btn"),u=(0,d.default)("#next-btn"),m=(0,d.default)(".number-buttons"),p=e=>{c.disabled=!1,u.disabled=!1;let t=window.innerWidth;t<768?function(e){m.innerHTML="",1===q&&(c.disabled=!0),q===e&&(u.disabled=!0),q<3?f(3):q>=3&&q<e-2?f(q):f(e-2)}(e):function(e){m.innerHTML="",1===q&&(c.disabled=!0),q===e&&(u.disabled=!0),q<5?(g(5),v(),h(e)):q>=5&&q<e-4?(h(1),v(),f(q),v(),h(e)):(h(1),v(),g(e-2))}(e)};function f(e){for(let t=e-2;t<=e+2;t++){let e=document.createElement("button");e.innerText=t,e.classList.add("pagination__button"),e.dataset.page=t,q===t&&e.classList.add("active"),m.appendChild(e)}}function g(e){for(let t=e-3;t<=e+3;t++){let e=document.createElement("button");e.innerText=t-1,e.classList.add("pagination__button"),e.dataset.page=t-1,q===t-1&&e.classList.add("active"),m.appendChild(e)}}function v(){let e=document.createElement("button");e.innerText="...",e.classList.add("dot-btn"),e.disabled=!0,m.appendChild(e)}function h(e){let t=document.createElement("button");t.innerText=`${e}`,t.classList.add("pagination__button"),t.dataset.page=e,m.appendChild(t)}var y=n("7Y9D8");function w(){e(y).Loading.hourglass({svgColor:"#B92F2C"})}function b(){e(y).Loading.remove()}function _(){e(y).Notify.warning("Please enter the name of a movie to initiate a search.")}function E(){e(y).Notify.warning("No movie was found, try another movie")}var d=n("1zbvg");const L=(0,d.default)(".pagination"),$="https://api.themoviedb.org/3/search/movie?include_adult=false&language=en-US&page=",T="&api_key=53b2ac0d64cbeedea763734f4fe8a4ce&query=",k=(0,d.default)("#form__search input"),x=(0,d.default)("#form__search"),S=(0,d.default)(".gallery");let M="",C="allMovies",q=1;const O=()=>{let e=(0,d.default)(".pagination");e.addEventListener("click",D)};function D(e){console.log(C);let t=e.target;if(t.dataset.page){let e=t.dataset.page;q=e=Number(e),"allMovies"===C&&R(),"search"===C&&U()}t.dataset.prev&&(q-=1,"allMovies"===C&&R(),"search"===C&&U()),t.dataset.next&&(q+=1,"allMovies"===C&&R(),"search"===C&&U()),console.log(q)}const R=async()=>{w(),C="allMovies",L.classList.contains("is-hidden")&&L.classList.remove("is-hidden");try{let e=(0,d.default)(".gallery"),t=`${s}/trending/all/day?page=${q}&api_key=${l}`,a=await (0,i.default).get(t),o=a.data,n=o.total_pages;n/=2;let c=o.results,u=await F();r(c,u,e),p(n),window.scrollTo({top:0,behavior:"smooth"})}catch(t){console.log(t),e(y).Notify.failure("Oops! Something went wrong. Please try again later.")}finally{b()}};async function F(){try{let e=`${s}/genre/movie/list?api_key=${l}`,t=await (0,i.default).get(e),a=t.data;return a=a.genres}catch(e){console.log(e)}}const W=async()=>{x.addEventListener("submit",async e=>{e.preventDefault(),w(),C="search",currentPageExport=1,q=1,M=k.value;try{if(""===M){R(),_();return}k.value=M;let e=`${$}${q}${T}${M}`,t=await (0,i.default).get(e),a=t.data,o=a.total_results,n=a.total_pages,l=a.results,s=await F();r(l,s,S),0===o&&(E(),R()),n>1?p(n):L.classList.add("is-hidden"),window.scrollTo({top:0,behavior:"smooth"})}catch(e){console.log(e)}finally{b()}})},U=async()=>{w(),k.value=M;try{if(""===M){R(),_();return}let e=`${$}${q}${T}${M}`,t=await (0,i.default).get(e),a=t.data,o=a.total_results,n=a.total_pages,l=a.results,s=await F();r(l,s,S),0===o&&(E(),R()),p(n),window.scrollTo({top:0,behavior:"smooth"})}catch(e){console.log(e)}finally{b()}},N=async e=>{try{let t=`${s}/movie/${e.id}/videos?api_key=${l}`,a=await fetch(t),o=await a.json(),n=o.results;if(console.log(n),n.length>0){let e=n.find(e=>"Trailer"===e.type);if(e)return e.key}}catch(e){console.log(e)}return null},Q=async()=>{try{let e=`${s}/trending/all/day?api_key=${l}&language=en-US&page=1`,t=await fetch(e),a=await t.json(),o=a.results;j(o),B()}catch(t){console.log(t),e(y).Notify.warning("Oops! Something went wrong, but life goes on")}},H=document.querySelector(".carousel-prev"),I=document.querySelector(".carousel-next"),A=document.querySelector(".swiper__wrapper");let z=0;const j=e=>{A.innerHTML="",e.forEach((t,a)=>{let o=document.createElement("div");o.classList.add("swiper__slide"),o.dataset.index=a;let n=document.createElement("img");n.classList.add("swiper__image"),n.src=`https://image.tmdb.org/t/p/w500${t.poster_path}`,n.alt=t.title;let i=document.createElement("a");i.classList.add("watch-trailer-link"),i.href="#",i.dataset.movieId=t.id;let l=P();i.innerHTML=l,o.appendChild(i),o.appendChild(n),A.appendChild(o),i.addEventListener("click",async a=>{a.preventDefault();let o=a.target.dataset.movieId,n=e.find(e=>e.id===parseInt(o));if(n)try{let e=await N(t);if(e){let t=`https://www.youtube.com/watch?v=${e}`;window.open(t,"_blank")}else console.log("No trailer found for the movie.")}catch(e){console.log(e)}})})},B=()=>{let e=A.children.length,t=Math.floor(A.offsetWidth/200),a=e-t;H.addEventListener("click",()=>{z=(z-1+e)%e,o()}),I.addEventListener("click",()=>{z=(z+1)%e,o()});let o=()=>{let e=-(200*z);A.style.transition="transform 0.5s",A.style.transform=`translateX(${e}px)`,z===a&&setTimeout(()=>{A.style.transition="none",z=0,A.style.transform="translateX(0)"},500)},n=A.querySelectorAll(".swiper__slide");n.forEach(e=>{e.addEventListener("mouseover",()=>{e.querySelector(".swiper__image").style.transform="scale(1.1)"}),e.addEventListener("mouseout",()=>{e.querySelector(".swiper__image").style.transform="scale(1)"})}),setInterval(()=>{z=(z+1)%e,o()},3e3)},P=()=>`<svg class="youtube-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="44" height="44">
    <circle cx="12" cy="12" r="10" fill="#FF0000" />
    <path fill="#FFFFFF" d="M9.75 7.52v8.956l6.25-4.478z" />
  </svg>`;var d=n("1zbvg");const V="toWatch",J="toQueue",X=(0,d.default)(".modal"),Y=e=>localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):[],G=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},K=()=>{X.addEventListener("click",e=>{let t=e.target,a=e.currentTarget.dataset.movieId,o=Y(V),n=Y(J),i=Z(o),l=Z(n),s={id:a};"toWatch"===t.dataset.action?i.includes(a)||(o.push(s),G(V,o),t.textContent="REMOVE FROM WATCHED",t.dataset.action="toWatchRmv"):"toQueue"===t.dataset.action?l.includes(a)||(n.push(s),G(J,n),t.textContent="REMOVE FROM QUEUE",t.dataset.action="toQueueRmv"):"toWatchRmv"===t.dataset.action?(o=o.filter(e=>e.id!==a),G(V,o),t.textContent="ADD TO WATCHED",t.dataset.action="toWatch"):"toQueueRmv"===t.dataset.action&&(n=n.filter(e=>e.id!==a),G(J,n),t.textContent="ADD TO QUEUE",t.dataset.action="toQueue")})};function Z(e){let t=[];return e.forEach(e=>{t.push(e.id)}),t}const ee=(e,t,a)=>{let o=Z(e);"toWatch"===t.dataset.action&&o.includes(a)&&(t.textContent="REMOVE FROM WATCHED",t.dataset.action="toWatchRmv"),"toWatchRmv"!==t.dataset.action||o.includes(a)||(t.textContent="ADD TO WATCHED",t.dataset.action="toWatch")},et=(e,t,a)=>{let o=Z(e);"toQueue"===t.dataset.action&&o.includes(a)&&(t.textContent="REMOVE FROM QUEUE",t.dataset.action="toQueueRmv"),"toQueueRmv"!==t.dataset.action||o.includes(a)||(t.textContent="ADD TO QUEUE",t.dataset.action="toQueue")};var d=n("1zbvg");const ea=(0,d.default)(".modal"),eo=(0,d.default)(".gallery"),en=e=>{let t=e.target.parentNode,a=ea.querySelector(".watch"),o=ea.querySelector(".queue"),n=t.dataset.id,i=Y(V),l=Y(J);ee(i,a,n),et(l,o,n)},ei=()=>{eo.addEventListener("click",en)};(async function(){try{let e=await fetch(`https://api.themoviedb.org/3/discover/movie?sort_by=vote_count.desc&api_key=${l}`),t=await e.json(),a=t.results.find(e=>e.vote_count>0),o=await fetch(`https://api.themoviedb.org/3/movie/${a.id}/videos?api_key=${l}`),n=await o.json(),i=n.results.find(e=>"Trailer"===e.type);if(i){let e=i.key,t=`https://www.youtube.com/embed/${e}`;return t}throw Error("No trailer found for the movie.")}catch(e){throw console.error("Error:",e),e}})().then(e=>{let t=document.querySelector(".video-frame"),a=document.createElement("iframe");a.src=e,a.width="100%",a.height="100%",a.allowFullscreen=!0,t.appendChild(a)}).catch(e=>{console.error("Error:",e)});const el=async()=>{Q(),R(),O(),K(),ei(),W(),fetchMovieTrailer()};window.addEventListener("DOMContentLoaded",el);const es=document.querySelector("body"),er=document.querySelector(".dl-btn"),ed=document.querySelector(".fa-sun"),ec=document.querySelector(".fa-moon"),eu=document.querySelector(".modal"),em=document.querySelector(".team__modal");function ep(e){localStorage.setItem("darkmode",e)}!function(){let e=localStorage.getItem("darkmode");null===e?(ep(!1),ed.style.display="inline",ec.style.display="none"):"true"===e?(es.classList.add("darkmode"),ed.style.display="none",ec.style.display="inline"):"false"===e&&(ed.style.display="inline",ec.style.display="none")}(),er.addEventListener("click",()=>{es.classList.toggle("darkmode"),ed.classList.add("animated"),ec.classList.add("animated"),eu.classList.toggle("darkmode"),em.classList.toggle("darkmode"),ep(es.classList.contains("darkmode")),es.classList.contains("darkmode")?(ed.style.display="none",ec.style.display="inline"):(ed.style.display="inline",ec.style.display="none"),setTimeout(()=>{ed.classList.remove("animated"),ec.classList.remove("anmated")},500)});const ef=document.getElementById("scrollToTopBtn"),eg=document.querySelector(".scroll-btn__icon ");window.addEventListener("scroll",function(){window.scrollY>window.innerHeight/2?(ef.style.display="block",eg.style.transform="rotate(180deg)"):(ef.style.display="none",eg.style.transform="rotate(0deg)")}),ef.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})});
//# sourceMappingURL=index.dd0dd6d5.js.map
